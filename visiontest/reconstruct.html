<html lang="en"><head>
    <meta charset="utf-8">
    <title>Canvas Primer - Example: Using ImageData</title>
    <script type="text/javascript" src="encoding-indexes.js"></script>
    <script type="text/javascript" src="encoding.js"></script>
    <script type="text/javascript"><!--
window.addEventListener('load', function () {
  // Get the canvas element.
  var elem = document.getElementById('myCanvas');
  if (!elem || !elem.getContext) {
    return;
  }

  // Get the canvas 2d context.
  var context = elem.getContext('2d');
  if (!context || !context.putImageData) {
    return;
  }

  var imgd = false,
      w = 50, h = 50,
      x = 40,  y = 40;

  var img2 = false,
  		w2=60, h2 =80,
  		x2=500, y2=40;

  // Not all browsers implement createImageData. On such browsers we obtain the 
  // ImageData object using the getImageData method. The worst-case scenario is 
  // to create an object *similar* to the ImageData object and hope for the best 
  // luck.
  if (context.createImageData) {
    imgd = new ImageData(w, h);
  } else if (context.getImageData) {
    imgd = context.getImageData(0, 0, w, h);
  } else {
    imgd = {'width' : w, 'height' : h, 'data' : new Array(w*h*4)};
  }
  var pix = imgd.data;
  console.log(pix)

  var n = pix.toString()
  console.log(n)
  var unst = new TextEncoder().encode(n)

  console.log('hi',unst)

  var enc = new TextEncoder(n);
  console.log('hi2', enc.encode(n))

  



  img2 = new ImageData(w2,h2)

  var pix2 =img2.data;
  console.log(pix2);

 

	for (var i = 0, n = pix2.length; i < n; i += 4) {
    pix2[i ] = 100; // the red channel
    pix2[i+3] = 100; // the alpha channel
  }

 	context.putImageData(img2, x2, y2);

  // Loop over each pixel.
  for (var i = 0, n = unst.length; i < n; i += 4) {
    unst[i  ] = 255; // the red channel
    unst[i+3] = 127; // the alpha channel
  }

  // Draw the ImageData object.
  context.putImageData(imgd, x, y);
}, false);
    // --></script>
  </head>
  <body>
    <p><canvas id="myCanvas" width="1000" height="500">Your browser does not have 
    support for Canvas.  You should see: <span style="display:block;width:100%;height:500px;background:#f77">&nbsp;</span></canvas></p>
  

</body></html>